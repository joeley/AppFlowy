# AppFlowy Flutteré¡¹ç›®æ³¨é‡Šè¿›åº¦è®°å½•

## é¡¹ç›®æ¦‚è¿°
AppFlowyæ˜¯ä¸€ä¸ªå¼€æºçš„ç¬”è®°å’ŒçŸ¥è¯†ç®¡ç†åº”ç”¨ï¼ŒFlutterå‰ç«¯éƒ¨åˆ†è´Ÿè´£è·¨å¹³å°UIå±•ç¤ºã€‚
é‡‡ç”¨Flutter+Rustæ··åˆæ¶æ„ï¼Œå‰ç«¯è´Ÿè´£UIï¼Œåç«¯è´Ÿè´£ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®å¤„ç†ã€‚

## æ³¨é‡Šè¿›åº¦

### âœ… å·²å®Œæˆ

#### main.dart (å…¥å£æ–‡ä»¶)
- [x] mainå‡½æ•° - åº”ç”¨ç¨‹åºå…¥å£ç‚¹
- [x] ScaledWidgetsFlutterBindingåˆå§‹åŒ– - ç¼©æ”¾ç»‘å®š
- [x] runAppFlowyè°ƒç”¨ - å¯åŠ¨åº”ç”¨

#### startup/startup.dart (å¯åŠ¨æ¨¡å—)
- [x] EntryPointæŠ½è±¡ç±» - åº”ç”¨å…¥å£ç‚¹æ¥å£
- [x] FlowyRunnerContext - è¿è¡Œä¸Šä¸‹æ–‡
- [x] runAppFlowyå‡½æ•° - ä¸»å¯åŠ¨å‡½æ•°
- [x] FlowyRunnerç±» - åº”ç”¨è¿è¡Œå™¨
- [x] initGetItå‡½æ•° - ä¾èµ–æ³¨å…¥åˆå§‹åŒ–
- [x] LaunchContext - å¯åŠ¨ä¸Šä¸‹æ–‡
- [x] LaunchTaskåŸºç±» - å¯åŠ¨ä»»åŠ¡æ¨¡æ¿
- [x] AppLauncherç±» - ä»»åŠ¡æ‰§è¡Œå™¨
- [x] IntegrationModeæšä¸¾ - è¿è¡Œæ¨¡å¼
- [x] IntegrationTestHelper - æµ‹è¯•è¾…åŠ©ç±»

#### startup/entry_point.dart (åº”ç”¨å…¥å£å®ç°)
- [x] AppFlowyApplicationç±» - å…·ä½“å…¥å£ç‚¹å®ç°

#### startup/launch_configuration.dart (å¯åŠ¨é…ç½®)
- [x] LaunchConfigurationç±» - å¯åŠ¨å‚æ•°å°è£…

#### startup/deps_resolver.dart (ä¾èµ–è§£æå™¨)
- [x] DependencyResolverç±» - ä¸»è§£æå™¨
- [x] _resolveCloudDeps - äº‘æœåŠ¡ä¾èµ–
- [x] _resolveCommonService - é€šç”¨æœåŠ¡ä¾èµ–
- [x] _resolveUserDeps - ç”¨æˆ·è®¤è¯ä¾èµ–
- [x] _resolveHomeDeps - ä¸»é¡µç›¸å…³ä¾èµ–
- [x] _resolveFolderDeps - æ–‡ä»¶å¤¹è§†å›¾ä¾èµ–

#### user/presentation/screens/splash_screen.dart (é—ªå±é¡µ)
- [x] SplashScreenç±» - åº”ç”¨æ ¹é¡µé¢
- [x] _buildChildæ–¹æ³• - BLoCçŠ¶æ€ç®¡ç†
- [x] _handleAuthenticated - å·²è®¤è¯æµç¨‹
- [x] _handleUnauthenticated - æœªè®¤è¯æµç¨‹
- [x] _registerIfNeeded - è®¿å®¢è‡ªåŠ¨æ³¨å†Œ
- [x] Bodyç»„ä»¶ - å¹³å°é€‚é…æ˜¾ç¤º
- [x] _DesktopSplashBody - æ¡Œé¢ç«¯UI

#### startup/tasks/ (å¯åŠ¨ä»»åŠ¡æ¨¡å—)
- [x] platform_error_catcher.dart - å¹³å°é”™è¯¯æ•è·
- [x] memory_leak_detector.dart - å†…å­˜æ³„æ¼æ£€æµ‹
- [x] rust_sdk.dart - Rust SDKåˆå§‹åŒ–
- [x] localization.dart - å›½é™…åŒ–åˆå§‹åŒ–
- [x] load_plugin.dart - æ’ä»¶åŠ è½½

#### BLoCçŠ¶æ€ç®¡ç†
- [x] splash_bloc.dart - é—ªå±é¡µBLoCï¼ˆç®€å•ç¤ºä¾‹ï¼‰
- [x] auth_state.dart - è®¤è¯çŠ¶æ€ï¼ˆUnion Typeç¤ºä¾‹ï¼‰
- [x] sign_in_bloc.dart - ç™»å½•é¡µBLoCï¼ˆå¤æ‚ç¤ºä¾‹ï¼‰

#### ç§»åŠ¨ç«¯åŠŸèƒ½
- [x] mobile/application/mobile_router.dart - ç§»åŠ¨ç«¯è·¯ç”±
- [x] mobile/presentation/home/mobile_home_page.dart - ç§»åŠ¨ç«¯ä¸»é¡µ
- [x] mobile/presentation/bottom_sheet/show_mobile_bottom_sheet.dart - åº•éƒ¨å¼¹çª—
- [x] mobile/presentation/base/mobile_view_page.dart - è§†å›¾é¡µé¢åŸºç¡€

### ğŸ†• æ ¸å¿ƒç³»ç»Ÿæ¨¡å—ï¼ˆ2025-08-07 æ™šä¸Šå®Œæˆï¼‰

#### ç”¨æˆ·ç³»ç»Ÿæ¨¡å—
- [x] user/application/auth/auth_service.dart - è®¤è¯æœåŠ¡æ ¸å¿ƒæ¥å£
- [x] user/application/auth/af_cloud_auth_service.dart - AppFlowyäº‘è®¤è¯å®ç°
- [x] user/application/sign_up_bloc.dart - æ³¨å†Œæµç¨‹çŠ¶æ€ç®¡ç†
- [x] user/application/user_service.dart - ç”¨æˆ·ç®¡ç†æœåŠ¡
- [x] user/application/user_settings_service.dart - ç”¨æˆ·è®¾ç½®æœåŠ¡

#### æ•°æ®æŒä¹…åŒ–æ¨¡å—
- [x] core/config/kv.dart - é”®å€¼å­˜å‚¨æŠ½è±¡æ¥å£
- [x] core/config/kv_keys.dart - é…ç½®é”®åå¸¸é‡å®šä¹‰
- [x] workspace/application/settings/application_data_storage.dart - åº”ç”¨æ•°æ®ç›®å½•ç®¡ç†
- [x] startup/tasks/file_storage_task.dart - æ–‡ä»¶å­˜å‚¨æœåŠ¡
- [x] plugins/database/application/view/view_cache.dart - æ•°æ®åº“è§†å›¾ç¼“å­˜ç³»ç»Ÿ

#### é€šçŸ¥ç³»ç»Ÿæ¨¡å—
- [x] core/notification/notification_helper.dart - é€šçŸ¥ç³»ç»ŸåŸºç¡€ç»„ä»¶
- [x] core/notification/document_notification.dart - æ–‡æ¡£é€šçŸ¥è§£æå™¨
- [x] core/notification/folder_notification.dart - æ–‡ä»¶å¤¹é€šçŸ¥ç›‘å¬å™¨
- [x] core/notification/grid_notification.dart - æ•°æ®åº“é€šçŸ¥ç³»ç»Ÿ
- [x] core/notification/search_notification.dart - æœç´¢é€šçŸ¥ç³»ç»Ÿ
- [x] core/notification/user_notification.dart - ç”¨æˆ·çŠ¶æ€é€šçŸ¥

#### æ•°æ®åŒæ­¥å’Œåç«¯é€šä¿¡æ¨¡å—
- [x] startup/tasks/rust_sdk.dart - Rust SDKåˆå§‹åŒ–
- [x] packages/appflowy_backend/lib/appflowy_backend.dart - åç«¯é€šä¿¡æ ¸å¿ƒSDK
- [x] packages/appflowy_backend/lib/dispatch/dispatch.dart - æ¶ˆæ¯åˆ†å‘ç³»ç»Ÿ
- [x] packages/appflowy_backend/lib/rust_stream.dart - å®æ—¶äº‹ä»¶æµå¤„ç†
- [x] workspace/application/workspace/workspace_service.dart - å·¥ä½œåŒºåŒæ­¥æœåŠ¡
- [x] workspace/application/view/view_service.dart - è§†å›¾åŒæ­¥æœåŠ¡
- [x] plugins/document/application/document_sync_bloc.dart - æ–‡æ¡£åŒæ­¥çŠ¶æ€ç®¡ç†
- [x] ai/service/appflowy_ai_service.dart - AIæœåŠ¡æ¥å£

### ğŸ”¥ ä»Šæ—¥å®Œæˆ (2025-08-08)

#### æ–‡æ¡£ç¼–è¾‘å™¨æ’ä»¶ (plugins/document/presentation/editor_page.dart)
- [x] AppFlowyEditorPageç±» - æ–‡æ¡£ç¼–è¾‘å™¨æ ¸å¿ƒåŒ…è£…å™¨
- [x] ç¼–è¾‘å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- [x] å·¥å…·æ é…ç½®å’Œå¿«æ·é”®ç³»ç»Ÿ
- [x] è¡Œå†…æ“ä½œæœåŠ¡ï¼ˆ@æåŠã€æ—¥æœŸå¼•ç”¨ç­‰ï¼‰
- [x] è·¨å¹³å°é€‚é…ï¼ˆæ¡Œé¢ç«¯/ç§»åŠ¨ç«¯ï¼‰
- [x] ç„¦ç‚¹ç®¡ç†å’Œé€‰åŒºæ¢å¤
- [x] é¢œè‰²ç³»ç»Ÿå’Œä¸»é¢˜è£…é¥°å™¨

#### æ•°æ®åº“æ§åˆ¶å™¨ (plugins/database/application/database_controller.dart)
- [x] DatabaseControllerç±» - æ•°æ®åº“åŠŸèƒ½æ ¸å¿ƒæ§åˆ¶å™¨
- [x] è§†å›¾æ¨¡å¼åˆ‡æ¢ï¼ˆè¡¨æ ¼ã€çœ‹æ¿ã€æ—¥å†ï¼‰
- [x] åˆ†ç»„ã€æ’åºã€è¿‡æ»¤åŠŸèƒ½
- [x] ç´§å‡‘æ¨¡å¼ç®¡ç†
- [x] å¸ƒå±€è®¾ç½®å’Œç›‘å¬å™¨ç³»ç»Ÿ
- [x] è¡Œæ•°æ®å’Œå­—æ®µå˜åŒ–ç›‘å¬

#### æ ‡ç­¾é¡µç®¡ç† (workspace/application/tabs/tabs_bloc.dart)
- [x] TabsBlocç±» - å¤šæ ‡ç­¾é¡µç®¡ç†
- [x] æ ‡ç­¾é¡µæ‰“å¼€ã€å…³é—­ã€åˆ‡æ¢é€»è¾‘
- [x] æ ‡ç­¾é¡µå›ºå®šï¼ˆPinï¼‰åŠŸèƒ½
- [x] äºŒçº§æ’ä»¶ç®¡ç†ï¼ˆåˆ†å±æ˜¾ç¤ºï¼‰
- [x] å·¥ä½œåŒºåˆ‡æ¢æ—¶çš„æ ‡ç­¾é¡µå¤„ç†
- [x] æœ€è¿‘æ‰“å¼€è§†å›¾è·Ÿè¸ª

#### è·¯ç”±ç³»ç»Ÿ (user/presentation/router.dart)
- [x] AuthRouterç±» - è®¤è¯è·¯ç”±ç®¡ç†
- [x] SplashRouterç±» - é—ªå±è·¯ç”±ç®¡ç†
- [x] å·¥ä½œåŒºé¡µé¢å¯¼èˆªé€»è¾‘
- [x] å¹³å°é€‚é…è·¯ç”±ï¼ˆç§»åŠ¨ç«¯/æ¡Œé¢ç«¯ï¼‰
- [x] pushå’Œgoä¸¤ç§å¯¼èˆªæ¨¡å¼

#### æ¡Œé¢ç«¯ä¸»é¡µæ¶æ„ (workspace/presentation/home/desktop_home_screen.dart)
- [x] DesktopHomeScreenç±» - æ¡Œé¢ç«¯ä¸»é¡µå®¹å™¨
- [x] å¤šBLoCæä¾›å™¨åˆå§‹åŒ–
- [x] å¤æ‚å¸ƒå±€ç³»ç»Ÿï¼ˆStack + Positionedï¼‰
- [x] ä¾§è¾¹æ ã€ç¼–è¾‘é¢æ¿ã€é€šçŸ¥é¢æ¿ç»„è£…
- [x] åŠ¨ç”»ç³»ç»Ÿï¼ˆæ»‘å…¥/æ»‘å‡ºæ•ˆæœï¼‰
- [x] è§†å›¾åˆ é™¤åçš„æ™ºèƒ½åˆ‡æ¢é€»è¾‘
- [x] ç©ºé—´åˆ‡æ¢åŠŸèƒ½

#### æ’ä»¶ç³»ç»Ÿæ ¸å¿ƒ (startup/plugin/)
- [x] Pluginç±» - æ’ä»¶æŠ½è±¡åŸºç±»å®šä¹‰
- [x] PluginBuilderç±» - æ’ä»¶å·¥å‚æ¨¡å¼å®ç°
- [x] PluginNotifierç±» - æ’ä»¶çŠ¶æ€é€šçŸ¥æœºåˆ¶
- [x] PluginConfigç±» - æ’ä»¶é…ç½®ç®¡ç†
- [x] PluginWidgetBuilderç±» - æ’ä»¶UIæ„å»ºå™¨
- [x] PluginContextç±» - æ’ä»¶è¿è¡Œæ—¶ä¸Šä¸‹æ–‡
- [x] PluginSandboxç±» - æ’ä»¶æ²™ç®±ç¯å¢ƒ
- [x] æ’ä»¶æ³¨å†Œå’Œåˆ›å»ºæœºåˆ¶
- [x] æ’ä»¶ç±»å‹æšä¸¾å®šä¹‰

#### å·¥ä½œåŒºç®¡ç† (workspace/application/workspace/)
- [x] WorkspaceServiceç±» - å·¥ä½œåŒºæœåŠ¡å±‚
- [x] WorkspaceBlocç±» - å·¥ä½œåŒºçŠ¶æ€ç®¡ç†
- [x] å·¥ä½œåŒºåˆ›å»ºã€è·å–ã€ç§»åŠ¨åŠŸèƒ½
- [x] å…¬å¼€/ç§æœ‰è§†å›¾ç®¡ç†
- [x] å·¥ä½œåŒºä½¿ç”¨ç»Ÿè®¡
- [x] è®¡è´¹é—¨æˆ·é›†æˆ

#### UIç»„ä»¶åº“ (workspace/presentation/widgets/)
- [x] ViewTabBarItemç±» - è§†å›¾æ ‡ç­¾æ é¡¹ç»„ä»¶
- [x] PopoverActionListç±» - å¼¹å‡ºåŠ¨ä½œåˆ—è¡¨ç³»ç»Ÿ
- [x] ActionCell/PopoverActionCell/CustomActionCell - åŠ¨ä½œå•å…ƒæ ¼æŠ½è±¡
- [x] HoverButtonç±» - æ‚¬åœæŒ‰é’®ç»„ä»¶
- [x] å¤šç§åŠ¨ä½œç±»å‹æ”¯æŒï¼ˆæ™®é€šã€åµŒå¥—å¼¹å‡ºã€è‡ªå®šä¹‰ï¼‰
- [x] å¼¹å‡ºå±‚æ§åˆ¶å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†

#### å…¶ä»–å¯åŠ¨ä»»åŠ¡ (startup/tasks/)
- [x] DebugTaskç±» - è°ƒè¯•ä»»åŠ¡åˆå§‹åŒ–
- [x] FeatureFlagTaskç±» - ç‰¹æ€§å¼€å…³ç®¡ç†
- [x] WindowSizeManagerç±» - çª—å£å°ºå¯¸ç®¡ç†å™¨
- [x] BLoCäº‹ä»¶æ—¥å¿—è®°å½•é…ç½®
- [x] Rustè¯·æ±‚è·Ÿè¸ªè®¾ç½®
- [x] çª—å£ä½ç½®å’Œç¼©æ”¾å› å­ç®¡ç†

#### å‘½ä»¤é¢æ¿ç³»ç»Ÿ (workspace/application/command_palette/)
- [x] CommandPaletteBlocç±» - å‘½ä»¤é¢æ¿ä¸šåŠ¡é€»è¾‘æ§åˆ¶å™¨
- [x] CommandPaletteç±» - å‘½ä»¤é¢æ¿ä¸»ç»„ä»¶
- [x] CommandPaletteModalç±» - å‘½ä»¤é¢æ¿æ¨¡æ€æ¡†
- [x] æœç´¢é˜²æŠ–å™¨å®ç°
- [x] å¤šæºæœç´¢ç»“æœåˆå¹¶ç­–ç•¥
- [x] AIè¾…åŠ©æœç´¢é›†æˆ
- [x] å®æ—¶æœç´¢æµå¤„ç†æœºåˆ¶
- [x] å¿«æ·é”®ç»‘å®šç³»ç»Ÿï¼ˆCmd/Ctrl+Pï¼‰

#### å¤–è§‚è®¾ç½®ç®¡ç† (workspace/application/settings/appearance/)
- [x] AppearanceSettingsCubitç±» - å¤–è§‚è®¾ç½®ç®¡ç†å™¨
- [x] ä¸»é¢˜ç³»ç»Ÿç®¡ç†ï¼ˆæ˜/æš—/è·Ÿéšç³»ç»Ÿï¼‰
- [x] å­—ä½“å®¶æ—å’Œæ–‡æœ¬ç¼©æ”¾æ§åˆ¶
- [x] å›½é™…åŒ–è¯­è¨€è®¾ç½®
- [x] RTLå¸ƒå±€æ”¯æŒ
- [x] æ–‡æ¡£ç¼–è¾‘å™¨é¢œè‰²è‡ªå®šä¹‰
- [x] æ—¥æœŸæ—¶é—´æ ¼å¼è®¾ç½®
- [x] èœå•æŠ˜å çŠ¶æ€æŒä¹…åŒ–
- [x] é€šç”¨é”®å€¼å¯¹å­˜å‚¨æœºåˆ¶

#### åƒåœ¾æ¡¶åŠŸèƒ½ (plugins/trash/)
- [x] TrashPluginç±» - åƒåœ¾æ¡¶æ’ä»¶å®ç°
- [x] TrashPageç±» - åƒåœ¾æ¡¶é¡µé¢UI
- [x] TrashBlocç±» - åƒåœ¾æ¡¶çŠ¶æ€ç®¡ç†
- [x] æ‰¹é‡æ¢å¤/åˆ é™¤åŠŸèƒ½
- [x] å•é¡¹æ¢å¤/æ°¸ä¹…åˆ é™¤
- [x] äºŒæ¬¡ç¡®è®¤å®‰å…¨æœºåˆ¶
- [x] å›ºå®šè¡¨å¤´åˆ—è¡¨è®¾è®¡
- [x] å®æ—¶ç›‘å¬åƒåœ¾æ¡¶å˜åŒ–

### ğŸ“ å¾…å¤„ç†

## æ›´æ–°æ—¶é—´
- 2025-08-07 ä¸Šåˆ: å®ŒæˆBLoCçŠ¶æ€ç®¡ç†è¯¦è§£ï¼Œç†è§£äº†Flutterçš„å“åº”å¼ç¼–ç¨‹æ¨¡å¼
- 2025-08-07 ä¸‹åˆ: å®Œæˆç§»åŠ¨ç«¯æ ¸å¿ƒåŠŸèƒ½æ³¨é‡Šï¼Œç†è§£äº†ç§»åŠ¨ç«¯æ¶æ„è®¾è®¡
- 2025-08-07 æ™šä¸Š: å®Œæˆ4ä¸ªæ ¸å¿ƒç³»ç»Ÿæ¨¡å—çš„å¹¶è¡Œæ³¨é‡Šï¼ˆç”¨æˆ·ç³»ç»Ÿã€æ•°æ®æŒä¹…åŒ–ã€é€šçŸ¥ç³»ç»Ÿã€æ•°æ®åŒæ­¥ï¼‰
- 2025-08-08 ä¸Šåˆ: å®Œæˆæ’ä»¶ç³»ç»Ÿã€å·¥ä½œåŒºç®¡ç†ã€UIç»„ä»¶åº“ã€å…¶ä»–å¯åŠ¨ä»»åŠ¡çš„æ³¨é‡Š
- 2025-08-08 ä¸‹åˆ: å®Œæˆä¸‰ä¸ªæ ¸å¿ƒåŠŸèƒ½æ¨¡å—çš„æ³¨é‡Šï¼ˆå‘½ä»¤é¢æ¿ç³»ç»Ÿã€å¤–è§‚è®¾ç½®ç®¡ç†ã€åƒåœ¾æ¡¶åŠŸèƒ½ï¼‰
