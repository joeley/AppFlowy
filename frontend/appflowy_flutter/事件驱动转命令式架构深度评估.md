# ä»äº‹ä»¶é©±åŠ¨åˆ°å‘½ä»¤å¼ï¼šæ¶æ„è½¬æ¢æ·±åº¦è¯„ä¼°æŠ¥å‘Š

## æ‰§è¡Œæ‘˜è¦

ä» Bloc çš„äº‹ä»¶é©±åŠ¨æ¶æ„è½¬æ¢åˆ° Riverpod çš„å‘½ä»¤å¼æ¶æ„ï¼Œæ˜¯ä¸€ä¸ª**æ ¹æœ¬æ€§çš„æ¶æ„èŒƒå¼è½¬å˜**ã€‚è¿™ä¸ä»…ä»…æ˜¯çŠ¶æ€ç®¡ç†å·¥å…·çš„æ›¿æ¢ï¼Œè€Œæ˜¯æ•´ä¸ªåº”ç”¨ç¨‹åºè®¾è®¡å“²å­¦çš„æ”¹å˜ã€‚

**æ ¸å¿ƒç»“è®º**ï¼šè™½ç„¶æŠ€æœ¯ä¸Šå¯è¡Œï¼Œä½†è¿™ç§è½¬æ¢ä¼šå¸¦æ¥æ·±è¿œçš„æ¶æ„å½±å“ï¼Œéœ€è¦é‡æ–°æ€è€ƒæ•´ä¸ªåº”ç”¨çš„è®¾è®¡æ¨¡å¼ã€é”™è¯¯å¤„ç†ã€çŠ¶æ€åŒæ­¥å’Œå›¢é˜Ÿå¼€å‘æµç¨‹ã€‚

---

## ä¸€ã€æ¶æ„èŒƒå¼å¯¹æ¯”

### 1.1 äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEvent-Driven Architectureï¼‰- Bloc æ¨¡å¼

#### æ ¸å¿ƒç†å¿µ
```
ç”¨æˆ·æ“ä½œ â†’ äº‹ä»¶ â†’ å¤„ç†å™¨ â†’ çŠ¶æ€å˜åŒ– â†’ UIæ›´æ–°
```

#### å®é™…ä»£ç ç¤ºä¾‹ï¼ˆæ¥è‡ª AppFlowyï¼‰
```dart
// ChatBloc - äº‹ä»¶å®šä¹‰
@freezed
class ChatEvent with _$ChatEvent {
  // ç”¨æˆ·æ“ä½œæ˜ å°„ä¸ºäº‹ä»¶
  const factory ChatEvent.sendMessage(
    String message,
    MessageFormat format,
    Map<String, dynamic>? metadata,
    String? promptId,
  ) = _SendMessage;
  
  const factory ChatEvent.stopStream() = _StopStream;
  const factory ChatEvent.regenerateAnswer(String id) = _RegenerateAnswer;
  const factory ChatEvent.loadPreviousMessages() = _LoadPreviousMessages;
}

// äº‹ä»¶å¤„ç† - é›†ä¸­å¼å¤„ç†é€»è¾‘
void _dispatch() {
  on<ChatEvent>((event, emit) async {
    await event.when(
      sendMessage: (message, format, metadata, promptId) async =>
        _handleSendMessage(message, format, metadata, promptId, emit),
      stopStream: () async => _handleStopStream(emit),
      regenerateAnswer: (id) async => _handleRegenerateAnswer(id, emit),
      // ... 20+ ç§äº‹ä»¶å¤„ç†
    );
  });
}
```

#### ç‰¹å¾åˆ†æ
1. **è§£è€¦æ€§é«˜**ï¼šUI å’Œä¸šåŠ¡é€»è¾‘å®Œå…¨åˆ†ç¦»
2. **å¯è¿½æº¯æ€§å¼º**ï¼šæ¯ä¸ªçŠ¶æ€å˜åŒ–éƒ½æœ‰å¯¹åº”äº‹ä»¶
3. **æ—¶åºæ§åˆ¶ç²¾ç¡®**ï¼šäº‹ä»¶æŒ‰é¡ºåºå¤„ç†ï¼Œé¿å…ç«æ€æ¡ä»¶
4. **æµ‹è¯•å‹å¥½**ï¼šå¯ä»¥å•ç‹¬æµ‹è¯•äº‹ä»¶å¤„ç†é€»è¾‘

### 1.2 å‘½ä»¤å¼æ¶æ„ï¼ˆImperative Architectureï¼‰- Riverpod æ¨¡å¼

#### æ ¸å¿ƒç†å¿µ
```
ç”¨æˆ·æ“ä½œ â†’ ç›´æ¥æ–¹æ³•è°ƒç”¨ â†’ çŠ¶æ€æ›´æ–° â†’ UIæ›´æ–°
```

#### è½¬æ¢åçš„ä»£ç ç¤ºä¾‹
```dart
// ChatController - ç›´æ¥æ–¹æ³•è°ƒç”¨
@riverpod
class ChatController extends _$ChatController {
  @override
  ChatState build() => ChatState.initial();
  
  // ç›´æ¥æš´éœ²æ–¹æ³•ï¼Œè€Œéäº‹ä»¶
  Future<void> sendMessage(
    String message,
    MessageFormat format,
    Map<String, dynamic>? metadata,
    String? promptId,
  ) async {
    state = state.copyWith(isLoading: true);
    try {
      final result = await _messageService.send(message, format, metadata);
      state = state.copyWith(
        messages: [...state.messages, result],
        isLoading: false,
      );
    } catch (e) {
      state = state.copyWith(error: e.toString(), isLoading: false);
    }
  }
  
  void stopStream() {
    _streamManager.stop();
    state = state.copyWith(isStreaming: false);
  }
  
  Future<void> regenerateAnswer(String id) async {
    // ç›´æ¥æ‰§è¡Œé€»è¾‘
    final message = state.messages.firstWhere((m) => m.id == id);
    await _regenerate(message);
  }
}
```

#### ç‰¹å¾åˆ†æ
1. **ç›´è§‚ç®€æ´**ï¼šæ–¹æ³•å³è¡Œä¸ºï¼Œè°ƒç”¨å³æ‰§è¡Œ
2. **å“åº”å¿«é€Ÿ**ï¼šå‡å°‘ä¸­é—´å±‚ï¼Œç›´æ¥æ›´æ–°çŠ¶æ€
3. **ä»£ç é‡å°‘**ï¼šæ— éœ€å®šä¹‰äº‹ä»¶å’Œå¤æ‚çš„åˆ†å‘é€»è¾‘
4. **è°ƒè¯•ç®€å•**ï¼šè°ƒç”¨æ ˆæ¸…æ™°ï¼Œæ˜“äºè¿½è¸ª

---

## äºŒã€æ·±åº¦å½±å“åˆ†æ

### 2.1 æ¶æ„å±‚é¢å½±å“

#### å¤±å»çš„èƒ½åŠ›

| èƒ½åŠ› | äº‹ä»¶é©±åŠ¨ï¼ˆBlocï¼‰ | å‘½ä»¤å¼ï¼ˆRiverpodï¼‰ | å½±å“ç¨‹åº¦ |
|------|-----------------|-------------------|----------|
| **äº‹ä»¶é‡æ”¾** | âœ… å¯ä»¥é‡æ”¾äº‹ä»¶åºåˆ— | âŒ æ— æ³•é‡æ”¾ | ğŸ”´ é«˜ |
| **æ—¶é—´æ—…è¡Œè°ƒè¯•** | âœ… å¯å›æº¯ä»»æ„çŠ¶æ€ | âŒ ä»…å½“å‰çŠ¶æ€ | ğŸŸ¡ ä¸­ |
| **äº‹ä»¶æ‹¦æˆª** | âœ… å…¨å±€äº‹ä»¶ä¸­é—´ä»¶ | âš ï¸ éœ€è¦æ‰‹åŠ¨å®ç° | ğŸ”´ é«˜ |
| **å®¡è®¡æ—¥å¿—** | âœ… è‡ªåŠ¨äº‹ä»¶è®°å½• | âš ï¸ éœ€è¦é¢å¤–ä»£ç  | ğŸŸ¡ ä¸­ |
| **æ’¤é”€/é‡åš** | âœ… åŸºäºäº‹ä»¶æ ˆ | âš ï¸ éœ€è¦è‡ªå®šä¹‰å®ç° | ğŸ”´ é«˜ |

#### è·å¾—çš„èƒ½åŠ›

| èƒ½åŠ› | äº‹ä»¶é©±åŠ¨ï¼ˆBlocï¼‰ | å‘½ä»¤å¼ï¼ˆRiverpodï¼‰ | ä¼˜åŠ¿ç¨‹åº¦ |
|------|-----------------|-------------------|----------|
| **ä»£ç ç®€æ´æ€§** | âŒ æ ·æ¿ä»£ç å¤š | âœ… å‡å°‘ 40-50% | ğŸŸ¢ é«˜ |
| **å­¦ä¹ æˆæœ¬** | âŒ æ¦‚å¿µå¤æ‚ | âœ… ç›´è§‚æ˜“æ‡‚ | ğŸŸ¢ é«˜ |
| **æ€§èƒ½ä¼˜åŒ–** | âš ï¸ é¢å¤–å¼€é”€ | âœ… ç›´æ¥æ‰§è¡Œ | ğŸŸ¡ ä¸­ |
| **çƒ­é‡è½½** | âš ï¸ äº‹ä»¶éœ€é‡æ–°è§¦å‘ | âœ… çŠ¶æ€ä¿æŒ | ğŸŸ¡ ä¸­ |

### 2.2 å…·ä½“æ¨¡å—å½±å“è¯„ä¼°

#### é«˜å½±å“æ¨¡å—ï¼ˆéœ€è¦é‡æ–°è®¾è®¡ï¼‰

1. **æ•°æ®åº“æ¨¡å—**ï¼ˆGridBlocã€BoardBlocã€CalendarBlocï¼‰
   - å½“å‰ï¼šå¤æ‚çš„äº‹ä»¶é“¾å¤„ç†ï¼ˆæ’åºã€è¿‡æ»¤ã€åˆ†ç»„ï¼‰
   - è½¬æ¢åï¼šéœ€è¦é‡æ–°è®¾è®¡çŠ¶æ€åŒæ­¥æœºåˆ¶
   - é£é™©ï¼š**æé«˜** - å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´

2. **ååŒç¼–è¾‘**ï¼ˆDocumentSyncBlocï¼‰
   - å½“å‰ï¼šåŸºäºäº‹ä»¶çš„å†²çªè§£å†³
   - è½¬æ¢åï¼šå¤±å»äº‹ä»¶é¡ºåºä¿è¯
   - é£é™©ï¼š**æé«˜** - å½±å“å¤šç”¨æˆ·åä½œ

3. **æ’¤é”€/é‡åšç³»ç»Ÿ**
   - å½“å‰ï¼šåŸºäºäº‹ä»¶æ ˆ
   - è½¬æ¢åï¼šéœ€è¦å®Œå…¨é‡å†™
   - é£é™©ï¼š**é«˜** - æ ¸å¿ƒåŠŸèƒ½å—å½±å“

#### ä¸­ç­‰å½±å“æ¨¡å—

1. **AI èŠå¤©**ï¼ˆChatBlocï¼‰
   - æµå¼å“åº”å¤„ç†éœ€è¦é‡æ–°è®¾è®¡
   - æ¶ˆæ¯é˜Ÿåˆ—ç®¡ç†å˜å¤æ‚

2. **å·¥ä½œåŒºç®¡ç†**ï¼ˆWorkspaceBlocï¼‰
   - çŠ¶æ€åˆ‡æ¢é€»è¾‘éœ€è¦é‡æ„
   - æƒé™éªŒè¯æµç¨‹æ”¹å˜

#### ä½å½±å“æ¨¡å—

1. **ä¸»é¢˜è®¾ç½®**ï¼ˆAppearanceCubitï¼‰
   - ç®€å•çŠ¶æ€ï¼Œå®¹æ˜“è¿ç§»
   
2. **ç”¨æˆ·è®¾ç½®**ï¼ˆSettingsBlocï¼‰
   - ç‹¬ç«‹åŠŸèƒ½ï¼Œå½±å“å°

---

## ä¸‰ã€å®é™…æ¡ˆä¾‹åˆ†æ

### æ¡ˆä¾‹ 1ï¼šå¤æ‚äº‹ä»¶é“¾å¤„ç†

**åœºæ™¯**ï¼šç”¨æˆ·åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œè¿‡æ»¤æ“ä½œ

#### Bloc å®ç°ï¼ˆç°æœ‰ï¼‰
```dart
// äº‹ä»¶é“¾ï¼šç”¨æˆ·æ“ä½œ â†’ è¿‡æ»¤äº‹ä»¶ â†’ æ•°æ®é‡è½½äº‹ä»¶ â†’ UIæ›´æ–°äº‹ä»¶
class DatabaseBloc extends Bloc<DatabaseEvent, DatabaseState> {
  void _dispatch() {
    on<DatabaseEvent>((event, emit) async {
      await event.when(
        // 1. æ¥æ”¶è¿‡æ»¤äº‹ä»¶
        applyFilter: (filter) async {
          emit(state.copyWith(isLoading: true));
          
          // 2. è§¦å‘æ•°æ®é‡è½½äº‹ä»¶ï¼ˆäº‹ä»¶é“¾ï¼‰
          add(const DatabaseEvent.reloadData());
          
          // 3. ä¿å­˜è¿‡æ»¤å™¨
          await _saveFilter(filter);
        },
        
        // 4. å¤„ç†é‡è½½äº‹ä»¶
        reloadData: () async {
          final data = await _loadFilteredData();
          
          // 5. è§¦å‘è®¡ç®—äº‹ä»¶ï¼ˆäº‹ä»¶é“¾ç»§ç»­ï¼‰
          add(DatabaseEvent.calculateAggregations(data));
        },
        
        // 6. å¤„ç†è®¡ç®—äº‹ä»¶
        calculateAggregations: (data) async {
          final aggregations = await _calculate(data);
          emit(state.copyWith(
            data: data,
            aggregations: aggregations,
            isLoading: false,
          ));
        },
      );
    });
  }
}
```

#### Riverpod å®ç°ï¼ˆè½¬æ¢åï¼‰
```dart
@riverpod
class DatabaseController extends _$DatabaseController {
  // éœ€è¦æ‰‹åŠ¨ç®¡ç†å¤æ‚çš„æ“ä½œé“¾
  Future<void> applyFilter(Filter filter) async {
    state = state.copyWith(isLoading: true);
    
    try {
      // æ‰‹åŠ¨ç¼–æ’æ“ä½œé¡ºåº
      await _saveFilter(filter);
      final data = await _loadFilteredData();
      final aggregations = await _calculate(data);
      
      state = state.copyWith(
        data: data,
        aggregations: aggregations,
        isLoading: false,
      );
    } catch (e) {
      // é”™è¯¯å¤„ç†å˜å¾—åˆ†æ•£
      state = state.copyWith(error: e, isLoading: false);
    }
  }
}
```

**é—®é¢˜åˆ†æ**ï¼š
1. å¤±å»äº†äº‹ä»¶é“¾çš„æ¸…æ™°æ€§
2. æ“ä½œé¡ºåºç¡¬ç¼–ç åœ¨æ–¹æ³•ä¸­
3. éš¾ä»¥æ’å…¥ä¸­é—´æ­¥éª¤
4. é”™è¯¯å¤„ç†å˜å¾—å¤æ‚

### æ¡ˆä¾‹ 2ï¼šå¹¶å‘æ§åˆ¶

**åœºæ™¯**ï¼šå¤šä¸ªæ“ä½œåŒæ—¶ä¿®æ”¹çŠ¶æ€

#### Bloc å®ç°ï¼ˆç°æœ‰ï¼‰
```dart
class ViewBloc extends Bloc<ViewEvent, ViewState> {
  // Bloc è‡ªåŠ¨åºåˆ—åŒ–äº‹ä»¶ï¼Œé¿å…ç«æ€æ¡ä»¶
  void _dispatch() {
    on<ViewEvent>(
      (event, emit) async {
        // äº‹ä»¶æŒ‰é¡ºåºå¤„ç†ï¼Œè‡ªåŠ¨é¿å…å¹¶å‘é—®é¢˜
        await event.when(
          rename: (name) => _rename(name, emit),
          delete: () => _delete(emit),
          move: (target) => _move(target, emit),
        );
      },
      // å¯ä»¥é…ç½®å¹¶å‘å¤„ç†ç­–ç•¥
      transformer: sequential(), // é¡ºåºå¤„ç†
      // transformer: concurrent(), // å¹¶å‘å¤„ç†
      // transformer: droppable(), // å¯ä¸¢å¼ƒ
    );
  }
}
```

#### Riverpod å®ç°ï¼ˆè½¬æ¢åï¼‰
```dart
@riverpod
class ViewController extends _$ViewController {
  // éœ€è¦æ‰‹åŠ¨å¤„ç†å¹¶å‘
  final _operationQueue = Queue();
  
  Future<void> rename(String name) async {
    // æ‰‹åŠ¨å®ç°é˜Ÿåˆ—æ§åˆ¶
    await _operationQueue.add(() async {
      state = state.copyWith(isLoading: true);
      await _backendService.rename(viewId, name);
      state = state.copyWith(name: name, isLoading: false);
    });
  }
  
  Future<void> delete() async {
    await _operationQueue.add(() async {
      // æ‰‹åŠ¨å¤„ç†å¹¶å‘
    });
  }
}
```

**é—®é¢˜åˆ†æ**ï¼š
1. éœ€è¦æ‰‹åŠ¨å®ç°å¹¶å‘æ§åˆ¶
2. å®¹æ˜“å‡ºç°ç«æ€æ¡ä»¶
3. ä»£ç å¤æ‚åº¦å¢åŠ 

---

## å››ã€è¿ç§»é£é™©çŸ©é˜µ

### é£é™©è¯„ä¼°è¡¨

| é£é™©ç±»åˆ« | é£é™©ç­‰çº§ | æ¦‚ç‡ | å½±å“ | ç¼“è§£ç­–ç•¥ |
|---------|---------|------|------|----------|
| **æ¶æ„ä¸€è‡´æ€§ç ´å** | ğŸ”´ æé«˜ | 90% | ä¸¥é‡ | åˆ†é˜¶æ®µè¿ç§»ï¼Œä¿æŒåŒè½¨ |
| **å›¢é˜Ÿè®¤çŸ¥è´Ÿæ‹…** | ğŸ”´ é«˜ | 80% | ä¸¥é‡ | æ·±åº¦åŸ¹è®­ï¼Œç¼–å†™æŒ‡å— |
| **åŠŸèƒ½å›å½’** | ğŸ”´ é«˜ | 70% | ä¸¥é‡ | å®Œæ•´æµ‹è¯•è¦†ç›– |
| **æ€§èƒ½é—®é¢˜** | ğŸŸ¡ ä¸­ | 40% | ä¸­ç­‰ | æ€§èƒ½ç›‘æ§ï¼Œä¼˜åŒ– |
| **ç»´æŠ¤æˆæœ¬å¢åŠ ** | ğŸŸ¡ ä¸­ | 60% | ä¸­ç­‰ | å»ºç«‹æ–°çš„æœ€ä½³å®è·µ |
| **ç¬¬ä¸‰æ–¹å…¼å®¹** | ğŸŸ¢ ä½ | 20% | è½»å¾® | è¯„ä¼°ä¾èµ–ï¼Œé€æ­¥æ›¿æ¢ |

### å…·ä½“é£é™©åœºæ™¯

#### åœºæ™¯ 1ï¼šäº‹ä»¶é¡ºåºä¾èµ–
```dart
// é£é™©ï¼šæŸäº›åŠŸèƒ½ä¾èµ–ç‰¹å®šçš„äº‹ä»¶æ‰§è¡Œé¡ºåº
// Bloc ä¿è¯é¡ºåºï¼ŒRiverpod éœ€è¦æ‰‹åŠ¨ç®¡ç†
```

#### åœºæ™¯ 2ï¼šçŠ¶æ€å›æ»š
```dart
// é£é™©ï¼šæ— æ³•å›æ»šåˆ°ä¹‹å‰çš„çŠ¶æ€
// å½±å“ï¼šè°ƒè¯•å›°éš¾ï¼Œç”¨æˆ·ä½“éªŒä¸‹é™
```

#### åœºæ™¯ 3ï¼šä¸­é—´ä»¶åŠŸèƒ½
```dart
// é£é™©ï¼šå¤±å»å…¨å±€äº‹ä»¶æ‹¦æˆªèƒ½åŠ›
// å½±å“ï¼šæ—¥å¿—ã€åˆ†æã€æƒé™éªŒè¯éœ€è¦é‡æ–°å®ç°
```

---

## äº”ã€å†³ç­–å»ºè®®

### 5.1 æ˜¯å¦åº”è¯¥è½¬æ¢ï¼Ÿ

åŸºäºæ·±åº¦åˆ†æï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š

#### âŒ **ä¸å»ºè®®å®Œå…¨è½¬æ¢**ï¼ŒåŸå› å¦‚ä¸‹ï¼š

1. **æ¶æ„å¥‘åˆåº¦**ï¼šAppFlowy çš„å¤æ‚ä¸šåŠ¡é€»è¾‘æ›´é€‚åˆäº‹ä»¶é©±åŠ¨
2. **åŠŸèƒ½æŸå¤±**ï¼šå¤±å»çš„èƒ½åŠ›ï¼ˆäº‹ä»¶é‡æ”¾ã€æ’¤é”€/é‡åšï¼‰å¯¹äº§å“æ ¸å¿ƒä»·å€¼å½±å“å¤§
3. **æˆæœ¬æ•ˆç›Š**ï¼šè¿ç§»æˆæœ¬æé«˜ï¼Œæ”¶ç›Šä¸è¶³ä»¥æŠµæ¶ˆé£é™©
4. **å›¢é˜Ÿå½±å“**ï¼šéœ€è¦é‡æ–°åŸ¹è®­ï¼ŒçŸ­æœŸç”Ÿäº§åŠ›å¤§å¹…ä¸‹é™

#### âœ… **å»ºè®®é‡‡ç”¨æ··åˆç­–ç•¥**ï¼š

1. **ä¿ç•™ Bloc æ ¸å¿ƒ**ï¼š
   - æ•°æ®åº“æ¨¡å—
   - æ–‡æ¡£ç¼–è¾‘å™¨
   - ååŒåŠŸèƒ½
   - å¤æ‚çŠ¶æ€æœº

2. **Riverpod ç”¨äºæ–°åŠŸèƒ½**ï¼š
   - ç®€å• CRUD æ“ä½œ
   - UI ç»„ä»¶çŠ¶æ€
   - æœ¬åœ°è®¾ç½®ç®¡ç†
   - ç‹¬ç«‹åŠŸèƒ½æ¨¡å—

### 5.2 æ¶æ„æ¼”è¿›è·¯çº¿å›¾

```mermaid
graph LR
    A[å½“å‰ï¼šçº¯ Bloc] --> B[Phase 1ï¼šå¼•å…¥ Riverpod]
    B --> C[Phase 2ï¼šæ–°åŠŸèƒ½ç”¨ Riverpod]
    C --> D[Phase 3ï¼šè¯„ä¼°æ•ˆæœ]
    D --> E{å†³ç­–ç‚¹}
    E -->|æ•ˆæœå¥½| F[æ‰©å¤§ Riverpod ä½¿ç”¨]
    E -->|æ•ˆæœå·®| G[ä¿æŒ Bloc ä¸ºä¸»]
```

### 5.3 æœ€ä½³å®è·µå»ºè®®

#### å¦‚æœå†³å®šéƒ¨åˆ†è¿ç§»ï¼š

1. **å»ºç«‹é€‚é…å±‚**
```dart
// åˆ›å»ºç»Ÿä¸€æ¥å£ï¼Œå±è”½åº•å±‚å·®å¼‚
abstract class StateManager<T> {
  Stream<T> watch();
  T read();
  void dispatch(Action action);
}

class BlocStateManager<T> implements StateManager<T> { }
class RiverpodStateManager<T> implements StateManager<T> { }
```

2. **ä¿æŒæ¶æ„ä¸€è‡´æ€§**
```dart
// å³ä½¿ä½¿ç”¨ Riverpodï¼Œä¹Ÿä¿æŒç±»ä¼¼äº‹ä»¶çš„æ–¹æ³•å‘½å
class Controller {
  void onUserTapSend() { } // è€Œé sendMessage()
  void onFilterApplied() { } // è€Œé applyFilter()
}
```

3. **å®ç°äº‹ä»¶æ—¥å¿—**
```dart
// åœ¨ Riverpod ä¸­æ‰‹åŠ¨å®ç°äº‹ä»¶è¿½è¸ª
mixin EventLogging on StateNotifier {
  void logEvent(String event, Map<String, dynamic> params) {
    // è®°å½•æ“ä½œæ—¥å¿—
  }
}
```

---

## å…­ã€ç»“è®º

ä»äº‹ä»¶é©±åŠ¨æ¶æ„è½¬å‘å‘½ä»¤å¼æ¶æ„æ˜¯ä¸€ä¸ª**é‡å¤§çš„æ¶æ„å†³ç­–**ï¼Œä¸åº”è¯¥ä»…åŸºäºä»£ç ç®€æ´æ€§æˆ–æµè¡Œè¶‹åŠ¿åšå‡ºã€‚

### æ ¸å¿ƒè§‚ç‚¹ï¼š

1. **æ¶æ„èŒƒå¼çš„é€‰æ‹©åº”è¯¥åŸºäºä¸šåŠ¡éœ€æ±‚**ï¼Œè€ŒéæŠ€æœ¯åå¥½
2. **AppFlowy çš„å¤æ‚æ€§æ›´é€‚åˆäº‹ä»¶é©±åŠ¨æ¶æ„**
3. **æ··åˆä½¿ç”¨æ˜¯æ›´åŠ¡å®çš„é€‰æ‹©**
4. **ä¿æŒæ¶æ„ä¸€è‡´æ€§æ¯”è¿½æ±‚æŠ€æœ¯ç»Ÿä¸€æ›´é‡è¦**

### æœ€ç»ˆå»ºè®®ï¼š

**ç»´æŒ Bloc ä½œä¸ºä¸»è¦æ¶æ„ï¼Œè°¨æ…å¼•å…¥ Riverpod ç”¨äºç‰¹å®šåœºæ™¯**ã€‚è¿™æ ·å¯ä»¥ï¼š
- ä¿æŒç°æœ‰æ¶æ„çš„ç¨³å®šæ€§
- é€æ­¥ç§¯ç´¯ Riverpod ç»éªŒ
- é¿å…å¤§è§„æ¨¡é‡æ„çš„é£é™©
- ä¸ºæœªæ¥çš„æ¶æ„æ¼”è¿›ä¿ç•™çµæ´»æ€§

---

*æŠ¥å‘Šå®Œæˆæ—¶é—´ï¼š2025-08-09*
*è¯„ä¼°æ·±åº¦ï¼šæ¶æ„çº§*
*å»ºè®®ç­‰çº§ï¼šæˆ˜ç•¥æ€§*